# **第一章 选题概述**

## 1.1 选题研究的目的、意义

      在中华民族的历史长河里，人们为了生存和发展，不断地进行防治水害等改造自然的伟大斗争、兴修水利。结合该项斗争的需要，逐步形成了了解和探索有关水循环的情势和规律的水文工作。  
      今天，水文事业在经济发展中扮演着重要的角色，但是近些年来，自然灾害的发生越来越频繁了，尤其是旱灾和洪灾的发生较为突出，这使得国家对水文工作的重视又重新提高了。于是国家成立了许许多多的水文局，用于管理各个地方的水情，这些水文局通过测量流速、流量、水位、降水量等水文参数，以此来实现对这些参数的监测，并对这些参数进行相应的分析，这些分析将为水情和旱情的监测和预报提供有力的根据。  
      其中水的流速问题是水文实验中极为重要的一个问题，测量水的流速的目的在于掌握它的特性，研究和分析它在一定的时间内水的流量会达到一个怎样的水平，速度是否过快而对人们的生产和生活造成不必要的损失，经过分析研究找出相应的应对措施。测量水的流速的方法比较多，其中被采用最多的使用各种各样的水文测流仪器。随着社会和科技技术的发展，水文测流仪器也在不断的发展，性能和稳定性也在不断的改善。

## 1.2 论文主要内容

      本文主要介绍以STM32F103C8T6微控制器为主控CPU来设计一款流速采集器，通过流速仪转子转动的信号输出情况来计测转子在一定时间内的转数，再查阅流速仪相应检定公式或检定关系曲线，就可以得到或计算出水流流速。进而把流速和采集的时间信息同时显示到OLED屏上，并通过Zigbee无线通信技术把流速和时间的相关信息传输到上位机进行监控。  
      上位机采用Python语言来开发，上位机主要有两个程序来构成。第一个Python程序用来接收从下位机通过Zigbee传输上来的数据，并把接收到的数据依次保存到postgresql数据库，TXT文件和Excel文件，还可以显示流速的实时散点图；第二个Python程序用于与用户交互，其中的人机界面有用户登录界面，系统主页和系统主页中的各个模块功能界面，模块功能主要有根据用户导入的第一个Python程序生成的TXT文件或Excel文件来生成相应的散点图，折线图和柱状图，还可以对导入的数据进行增删改查的操作，并可将修改后的数据保存起来。
      硬件设计难点为电源模块设计，电源是一个嵌入式系统很重要的部分，电源的稳定性、高效性、持久性直接决定了该嵌入式系统的稳定性和性能等，还有就是采集流速仪输出信号的隔离电路。  
      软件编写的难点是屏幕显示、开关量的采集、数据处理和各类接口通信，python操作Excel文件，python界面编程。

