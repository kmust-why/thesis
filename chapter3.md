# **第三章 系统硬件电路设计**

## 3.1 硬件电路总体结构设计

      本设计采用STM32F103C8T6作为主控CUP,利用独立按键来输出开关量，通过OLED液晶显示器来显示流速和采集到流速时的时间，硬件电路的总体设计方案如图3.1所示。 

![](/assets/硬件总体结构设计框图.png)  
图3.1硬件总体结构设计框图

## 3.2 硬件电路设计

      硬件电路设计包含STM32F103C8T6的最小系统电路设计，ISP电路设计，启动模式电路设计，JTAG电路设计，蜂鸣器电路设计，LED电路设计，按键电路设计，OLED接口电路设计，Zigbee接口电路设计，开关量采集电路设计，电源电路设计。 
      最终设计完成的电路原理图如图3.2和图3.3所示。 
![](/assets/硬件电路设计原理图1.png)  
图3.2 硬件电路设计原理图1  
![](/assets/硬件电路设计原理图2.png) 
图3.3 硬件电路设计原理图2

## 3.3 系统硬件电路PCB设计

      在设计完系统硬件原理图并检查无误后就可以进入PCB设计阶段了，本节将进行系统硬件PCB的设计与制作。

## 3.3.1 PCB板设计的步骤

      设计中对于 PCB 板的设计可以按照如下的简要步骤进行。

* （1）制作原理图        
* （2）产生网络表         
* （3）制作物理边框\(Keepout Layer\)       
* （4）元件和网络的引入       
* （5）元件的布局        
* （6）布线        
* （7）检查核对       
        在进行PCB布线的时候，可能会由于误操作造成PCB中的网络号跟原理图中的网络号对不上，这个时候需要仔细检查，不能急躁，更不能直接就拿去做板子，需要仔细核对后才行。

## 3.3.2 PCB板设计的成果

      原理图完成以后，将其导入PCB设计环境，进行元器件的布局后即可进行布线，覆铜等操作，最后完成PCB板的设计，如图3.4所示。  
      PCB设计好了以后就可以从软件中生成PCB制作文件到PCB厂商制作电路板了，制作好的PCB板子如图3.5所示。  
![](/assets/覆铜后的PCB正面图.png)  
图3.4 覆铜后的PCB正面图  
![](/assets/制作完成的PCB正面图.png)  
图3.5 制作完成的PCB正面图

## 3.4 硬件组装

      上面介绍了硬件电路原理图和PCB板的设计和制作，下面对硬件的组装进行介绍，其主要的工作就是焊接板子上的元器件。  
      在本系统中大部分的元器件都是贴片的，剩下的就是直插式的了，在做焊接之前需要做好相关的准备工作，包括准备电烙铁，焊锡丝，镊子等等，当然更重要的一点就是要准备好要焊接的元器件，准备好这些东西以后，就可以开始后续的工作了。  
      在焊接的过程中需要注意几个问题，首先是要保证焊接人员在整个焊接过程中的安全问题，切不可顺手就把电烙铁直接放在桌上或者是其他容易引发安全事故的地方；其次才是焊接元器件，先焊最小系统，焊接完成后，再焊接其他的小的贴片元件，遵循先矮后高的原则即可。焊接完成的电路板实物如图3.6所示。


![](/assets/焊接完成后的实物图.png)  
图3.6 焊接完成后的实物图

